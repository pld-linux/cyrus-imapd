--- cyrus-imapd-2.0.14/configure.in.wiget	Fri Jul  6 20:25:27 2001
+++ cyrus-imapd-2.0.14/configure.in	Fri Jul  6 20:27:05 2001
@@ -124,18 +124,11 @@
       fi
     done)
 #Try to detect the name of the DB3 library
-dbfound="no"
-for dbname in db-3.2 db3.2 db-3.1 db3.1 db-3 db3 db
-  do
-    AC_CHECK_LIB($dbname, db_create, [AC_DEFINE(HAVE_LIBDB)
-				      LIBS=" -l$dbname ${LIBS}"
-				      dbfound="yes"
-				      break], dbfound="no")
-  done
-if test "$dbfound" = "no"; then
-  AC_ERROR([this version requires Berkeley DB 3.x.
+AC_SEARCH_LIBS(db_create, [db-3.2 db3.2 db-3.11 db3.1 db-3 db3 db],
+		[AC_DEFINE(HAVE_LIBDB)],[
+	AC_ERROR([this version requires Berkeley DB 3.x.
 (Get it from http://www.sleepycat.com/.)])
-fi
+])
 
 sievedir="sieve"
 AC_ARG_ENABLE(sieve,
